# ===================================
# MEDUSA V2 PRODUCTION CONFIGURATION
# ===================================

# -------------------------------------
# Database Configuration
# -------------------------------------
# PostgreSQL connection URL
# Format: postgresql://username:password@host:port/database
DATABASE_URL=postgresql://user:password@localhost:5432/medusa_db

# -------------------------------------
# Redis Configuration
# -------------------------------------
# Redis connection URL for session, event bus, workflow engine, and locking
# Format: redis://[:password@]host:port[/db-number]
REDIS_URL=redis://localhost:6379

# Optional: Separate Redis URL for caching (if using different Redis instance)
# CACHE_REDIS_URL=redis://localhost:6379/1

# Optional: Separate Redis URL for locking (if using different Redis instance)
# LOCKING_REDIS_URL=redis://localhost:6379/2

# -------------------------------------
# Application Security
# -------------------------------------
# IMPORTANT: Generate secure random secrets for production!
# You can generate them using: openssl rand -base64 32
COOKIE_SECRET=your-random-cookie-secret-here
JWT_SECRET=your-random-jwt-secret-here

# -------------------------------------
# CORS Configuration
# -------------------------------------
# Storefront URL (your Next.js/React storefront)
STORE_CORS=http://localhost:8000

# Admin dashboard URL (same as your Medusa backend URL)
ADMIN_CORS=http://localhost:9000

# URLs of any application authenticating users (comma-separated)
# Include both storefront and admin URLs
AUTH_CORS=http://localhost:8000,http://localhost:9000

# -------------------------------------
# Worker Mode Configuration
# -------------------------------------
# Options: "shared" | "server" | "worker"
# - "shared": Both server and worker in one process (development only)
# - "server": Only handles API requests and serves admin
# - "worker": Only handles background tasks
MEDUSA_WORKER_MODE=shared

# -------------------------------------
# Admin Configuration
# -------------------------------------
# Disable admin in worker mode
# Set to "true" for worker instance, "false" for server instance
DISABLE_MEDUSA_ADMIN=false

# Backend URL for admin dashboard
# This is the URL of your Medusa server instance
MEDUSA_BACKEND_URL=http://localhost:9000

# -------------------------------------
# Payment Provider: Razorpay
# -------------------------------------
RAZORPAY_KEY_ID=your-razorpay-key-id
RAZORPAY_KEY_SECRET=your-razorpay-key-secret
RAZORPAY_WEBHOOK_SECRET=your-razorpay-webhook-secret

# -------------------------------------
# Server Configuration
# -------------------------------------
PORT=9000
NODE_ENV=development

# ===================================
# PRODUCTION DEPLOYMENT NOTES
# ===================================
#
# For Dokploy deployment, you need TWO instances:
#
# 1. SERVER INSTANCE (API + Admin):
#    - MEDUSA_WORKER_MODE=server
#    - DISABLE_MEDUSA_ADMIN=false
#    - ADMIN_CORS=<your-server-url>
#    - MEDUSA_BACKEND_URL=<your-server-url>
#    - AUTH_CORS=<storefront-url>,<server-url>
#
# 2. WORKER INSTANCE (Background Tasks):
#    - MEDUSA_WORKER_MODE=worker
#    - DISABLE_MEDUSA_ADMIN=true
#
# Both instances should share the same:
#    - DATABASE_URL
#    - REDIS_URL
#    - COOKIE_SECRET
#    - JWT_SECRET
#
# ===================================
